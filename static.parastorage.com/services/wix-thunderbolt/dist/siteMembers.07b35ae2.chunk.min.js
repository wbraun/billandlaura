(self.webpackJsonp__wix_thunderbolt_app = self.webpackJsonp__wix_thunderbolt_app || []).push([
    [4522], {
        31857: function(e, t, n) {
            "use strict";
            n.r(t), n.d(t, {
                AUTH_RESULT_REASON: function() {
                    return C.$9
                },
                BIEvents: function() {
                    return y
                },
                INTERACTIONS: function() {
                    return C.SE
                },
                PrivacyStatus: function() {
                    return C.iY
                },
                SiteMembersApiSymbol: function() {
                    return D.n9
                },
                isLoginAcceptableError: function() {
                    return E.Y2
                },
                isSignupAcceptableError: function() {
                    return E.fJ
                },
                memberDetailsFromDTO: function() {
                    return E.Ky
                },
                page: function() {
                    return J
                },
                site: function() {
                    return G
                }
            });
            var i = n(43757),
                o = n(31191),
                r = n(61049),
                s = n(49574),
                a = n(5096),
                u = n(55048),
                c = n(98333),
                l = n(10666),
                d = n(58629),
                m = n(26513),
                g = n(82627),
                h = n(8562),
                p = n(56405),
                f = n(19238),
                v = n(87821),
                b = n(23228),
                S = n(99552),
                w = n(16684),
                C = n(95848),
                P = n(51831),
                D = n(2811),
                k = function() {
                    function e(e, t, n, i) {
                        this.propsStore = e, this.structureApi = t, this.siteScrollBlocker = n, this.browserWindow = i
                    }
                    return e.prototype.displayDialog = function(e, t, n, i) {
                        return void 0 === i && (i = {}), (0, o.mG)(this, void 0, Promise, (function() {
                            var r, s, a, u = this;
                            return (0, o.Jh)(this, (function(c) {
                                switch (c.label) {
                                    case 0:
                                        return r = function() {
                                            return (0, o.mG)(u, void 0, void 0, (function() {
                                                var i, r;
                                                return (0, o.Jh)(this, (function(s) {
                                                    switch (s.label) {
                                                        case 0:
                                                            return (0, h.yF)(this.browserWindow) || (this.activeElementBeforeShowDialog = this.browserWindow.document.activeElement), i = (0, w.uniqueId)(D.rj), this.propsStore.update(((r = {})[i] = (0, o.pi)((0, o.pi)({}, t), n), r)), (0, P.U)(), [4, this.structureApi.addComponentToDynamicStructure(i, {
                                                                componentType: e,
                                                                components: []
                                                            })];
                                                        case 1:
                                                            return s.sent(), this.currentCompId && (this.structureApi.removeComponentFromDynamicStructure(this.currentCompId), this.siteScrollBlocker.setSiteScrollingBlocked(!1, this.currentCompId)), this.siteScrollBlocker.setSiteScrollingBlocked(!0, i), this.currentCompId = i, [2]
                                                    }
                                                }))
                                            }))
                                        }, s = i.shouldWaitForAppDidMount, a = i.registerToAppDidMount, s && a ? (a(r), [3, 3]) : [3, 1];
                                    case 1:
                                        return [4, r()];
                                    case 2:
                                        c.sent(), c.label = 3;
                                    case 3:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.hideDialog = function() {
                        var e;
                        this.currentCompId && (this.structureApi.removeComponentFromDynamicStructure(this.currentCompId), this.siteScrollBlocker.setSiteScrollingBlocked(!1, this.currentCompId), (0, P.i)()), this.currentCompId = void 0, (0, h.yF)(this.browserWindow) || (null === (e = this.activeElementBeforeShowDialog) || void 0 === e || e.focus(), this.activeElementBeforeShowDialog = null)
                    }, e
                }(),
                E = n(43096),
                y = function(e) {
                    var t = e.sessionManager,
                        n = e.businessLogger,
                        i = e.wixBiSession,
                        r = e.viewMode,
                        s = e.language,
                        a = function(e, n) {
                            return {
                                biToken: i.msId,
                                context: e,
                                ts: L(i),
                                viewmode: r,
                                visitor_id: t.getVisitorId(),
                                site_member_id: t.getSiteMemberId(),
                                vsi: i.viewerSessionId,
                                site_settings_lng: s.siteLanguage,
                                browser_lng: s.userLanguage,
                                lng_mismatch: s.siteLanguage !== s.userLanguage,
                                layout: n
                            }
                        };
                    return {
                        loginOrSignUpDialogLoaded: function(e, t) {
                            void 0 === t && (t = "fullscreen"), n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 658
                            }, a(e, t)), {
                                endpoint: "site-members"
                            })
                        },
                        closingDialog: function(e, t) {
                            void 0 === t && (t = "fullscreen"), n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 602,
                                form_type: "default"
                            }, a(e, t)), {
                                endpoint: "site-members"
                            })
                        },
                        emailAuthSubmitClicked: function(e, t) {
                            n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 603,
                                form_type: "default"
                            }, a(e, t)), {
                                endpoint: "site-members"
                            })
                        },
                        siteMembersFeatureLoaded: function() {
                            n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 698
                            }, a()), {
                                endpoint: "site-members"
                            })
                        },
                        siteMembersSdkFeatureLoaded: function() {
                            n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 699
                            }, a()), {
                                endpoint: "site-members"
                            })
                        }
                    }
                },
                L = function(e) {
                    var t = e.initialTimestamp || 0;
                    return Date.now() - t
                },
                T = function() {
                    function e(e) {
                        this.shouldRunCustomPopupCloseCallback = !0, this.popups = e
                    }
                    return e.prototype.openPopupPage = function(e, t, n) {
                        var i;
                        return (0, o.mG)(this, void 0, void 0, (function() {
                            var r, s = this;
                            return (0, o.Jh)(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return r = this.shouldRunCustomPopupCloseCallback, this.shouldRunCustomPopupCloseCallback = !1, this.assignRequestAuthenticationRejection(t), [4, null === (i = this.popups) || void 0 === i ? void 0 : i.openPopupPage(e, (function() {
                                            s.shouldRunCustomPopupCloseCallback && (s.rejectAuthenticationRequest(), n && n())
                                        }))];
                                    case 1:
                                        return o.sent(), this.shouldRunCustomPopupCloseCallback = r, [2]
                                }
                            }))
                        }))
                    }, e.prototype.preventCustomPopupCloseCallback = function() {
                        this.shouldRunCustomPopupCloseCallback = !1
                    }, e.prototype.allowCustomPopupCloseCallback = function() {
                        this.shouldRunCustomPopupCloseCallback = !0
                    }, e.prototype.assignRequestAuthenticationRejection = function(e) {
                        this.requestAuthenticationRejection = this.requestAuthenticationRejection || e
                    }, e.prototype.rejectAuthenticationRequest = function() {
                        this.requestAuthenticationRejection && (this.requestAuthenticationRejection(C.$9.CANCELED), this.requestAuthenticationRejection = void 0)
                    }, e
                }(),
                I = function(e, t, n) {
                    document.cookie = e + "=;max-age=0", document.cookie = e + "=;max-age=0;path=" + t, document.cookie = e + "=;domain=" + n + ";max-age=0", document.cookie = e + "=;domain=" + n + ";max-age=0;path=" + t
                },
                A = (0, i.ff)([(0, i.t6)(r.R9, D.u2), (0, i.t6)(r.jC, D.u2), (0, i.t6)(r.Wf, D.u2), s.U, a.EE, a.Zr, p.X, u.xP, u.QZ, a.bk, a.ZQ, f.F0, v.x, c.v, f.Iz, l.$, d.s, (0, i.jt)(b.r_), (0, i.jt)(S.I), m.jj, g.O], (function(e, t, n, i, r, s, a, u, c, l, d, m, g, p, f, v, b, S, P, D, L) {
                    var A, R;
                    void 0 === P && (P = {
                        trackEvent: function() {
                            return 0
                        }
                    });
                    var _ = e.collectionExposure,
                        M = e.smcollectionId,
                        O = e.smSessionCookie,
                        U = e.protectedHomepage,
                        N = e.isCommunityInstalled,
                        G = e.memberInfoAppId,
                        J = e.sm_efCookie,
                        x = "WixInternal" === _,
                        W = a.getUserSession(),
                        B = a.getAppInstanceByAppDefId("22bef345-3c5b-4c18-b782-74d4085112ff"),
                        F = null !== (A = a.getVisitorId()) && void 0 !== A ? A : "00000000-0000-0000-0000-000000000000",
                        q = t.smSettings,
                        j = t.tpaApplicationIds,
                        V = t.policyLinks,
                        $ = G && j[G],
                        K = s.site,
                        z = K.siteRevision,
                        Y = K.metaSiteId,
                        H = K.siteId,
                        X = K.externalBaseUrl,
                        Q = s.requestUrl,
                        Z = s.viewMode,
                        ee = -1 !== C.F0.findIndex((function(e) {
                            var t, n;
                            return null === (n = null === (t = null == d ? void 0 : d.navigator) || void 0 === t ? void 0 : t.userAgent) || void 0 === n ? void 0 : n.includes(e)
                        })),
                        te = !(L["specs.thunderbolt.sm_socialAuthMessageInInAppBrowser"] && ee),
                        ne = !(L["specs.thunderbolt.sm_customLoginSocialAuthMessageInInAppBrowser"] && ee),
                        ie = "/_api/wix-sm-webapp/tokens/verify/" + Y + "/" + H,
                        oe = X.replace(/\/$/, "") + "/api/wix-sm/v1/authorize/" + H + "/pages",
                        re = "/_api/wix-sm-webapp/tokens/logout/" + Y,
                        se = "/_api/wix-sm-webapp/member/changePasswordWithMailToken?metaSiteId=" + Y + "&collectionId=" + M,
                        ae = "/_api/wix-sm-webapp/social/token/handle?metaSiteId=" + Y + "&collectionId=" + M,
                        ue = q.smFirstDialogLogin ? "login" : "signup",
                        ce = q.socialLoginFacebookEnabled,
                        le = q.socialLoginGoogleEnabled,
                        de = q.termsOfUse,
                        me = q.privacyPolicy,
                        ge = q.codeOfConduct,
                        he = q.customSignUpPageId,
                        pe = q.customSignInPageId,
                        fe = null === (R = q.joinCommunityCheckedByDefault) || void 0 === R || R,
                        ve = e.smToken,
                        be = {},
                        Se = O,
                        we = null,
                        Ce = !1,
                        Pe = function(e) {
                            we = e
                        },
                        De = function() {
                            return {
                                registerToAppDidMount: Pe,
                                shouldWaitForAppDidMount: !Ce && D.isLandingOnProtectedPage()
                            }
                        },
                        ke = {},
                        Ee = {},
                        ye = y({
                            sessionManager: a,
                            businessLogger: v,
                            wixBiSession: b,
                            viewMode: null == Z ? void 0 : Z.toUpperCase(),
                            language: l
                        });
                    ye.siteMembersFeatureLoaded();
                    var Le = {},
                        Te = (0, E.Qn)(i, {
                            credentials: "same-origin",
                            headers: {
                                accept: "application/json",
                                "x-wix-site-revision": "" + z,
                                "x-wix-client-artifact-id": "thunderbolt"
                            }
                        }, s.requestUrl),
                        Ie = function(e, t, n, i) {
                            return new k(e, t, n, i)
                        }(u, c, g, d),
                        Ae = L["specs.thunderbolt.sm_googleAuthViaSDK"],
                        Re = new T(S),
                        _e = {
                            appDidMount: function() {
                                we && we(), Ce = !0
                            },
                            login: function(e, t, n, i) {
                                return void 0 === i && (i = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var r, s, a;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Submit",
                                                        eventLabel: "Wix"
                                                    }
                                                }), o.label = 1;
                                            case 1:
                                                return o.trys.push([1, 4, , 5]), [4, _e.performLogin(e, t, n)];
                                            case 2:
                                                return r = o.sent(), [4, _e.handleLoginResponse(r, i)];
                                            case 3:
                                                return s = o.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Success",
                                                        eventLabel: "Wix"
                                                    }
                                                }), [2, s];
                                            case 4:
                                                throw a = o.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Failure",
                                                        eventLabel: "Wix"
                                                    }
                                                }), a;
                                            case 5:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            performLogin: function(e, t, n) {
                                var i;
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var r;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return [4, Te("/_api/wix-sm-webapp/v1/auth/login", {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type": "application/json",
                                                        authorization: B || ""
                                                    },
                                                    body: JSON.stringify({
                                                        email: e,
                                                        password: t,
                                                        recaptchaToken: null == n ? void 0 : n.recaptchaToken
                                                    })
                                                })];
                                            case 1:
                                                return [2, {
                                                    member: (r = o.sent()).member,
                                                    token: null === (i = null == r ? void 0 : r.session) || void 0 === i ? void 0 : i.token
                                                }]
                                        }
                                    }))
                                }))
                            },
                            handleOauthToken: function(e, t, n, i, s) {
                                return void 0 === s && (s = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var u, c, d, m, g, h, p, f;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return u = a.getVisitorId(), r.interactionStarted(C.SE.SOCIAL_APP_LOGIN), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Submit",
                                                        eventLabel: t
                                                    }
                                                }), [4, Te(ae, {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type": "application/json"
                                                    },
                                                    body: JSON.stringify({
                                                        svSession: W,
                                                        visitorId: u,
                                                        token: e,
                                                        provider: t,
                                                        mode: n,
                                                        lang: l.userLanguage,
                                                        privacyStatus: i
                                                    })
                                                })];
                                            case 1:
                                                if (c = o.sent(), d = c.errorCode, m = c.payload, d) throw P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Failure",
                                                        eventLabel: t
                                                    }
                                                }), d;
                                                return r.interactionEnded(C.SE.SOCIAL_APP_LOGIN), m.smSession && (h = m.smSession.siteMemberDto, g = m.smSession.sessionToken), h = m.siteMemberDto, p = (0, E.Ky)(h), [4, _e.handleLoginResponse({
                                                    member: p,
                                                    token: g
                                                }, s)];
                                            case 2:
                                                return f = o.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Success",
                                                        eventLabel: t
                                                    }
                                                }), [2, f]
                                        }
                                    }))
                                }))
                            },
                            handleSocialLoginResponse: function(e, t, n) {
                                return void 0 === n && (n = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i, s, a, u;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return r.interactionStarted(C.SE.SOCIAL_APP_LOGIN), r.interactionEnded(C.SE.SOCIAL_APP_LOGIN), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Submit",
                                                        eventLabel: t
                                                    }
                                                }), e.smSession && (s = e.smSession.siteMemberDto, i = e.smSession.sessionToken), s = e.siteMemberDto, a = (0, E.Ky)(s), [4, _e.handleLoginResponse({
                                                    member: a,
                                                    token: i
                                                }, n)];
                                            case 1:
                                                return u = o.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Success",
                                                        eventLabel: t
                                                    }
                                                }), [2, u]
                                        }
                                    }))
                                }))
                            },
                            handleLoginResponse: function(e, t) {
                                var n = e.token,
                                    i = e.member;
                                return void 0 === t && (t = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var e, r, s;
                                    return (0, o.Jh)(this, (function(a) {
                                        switch (a.label) {
                                            case 0:
                                                return e = i.emailVerified, n || e || "ACTIVE" !== i.status ? [3, 2] : [4, _e.showConfirmationEmailDialog(i.id)];
                                            case 1:
                                            case 4:
                                                return a.sent(), [2, (0, E.Y_)()];
                                            case 2:
                                                return n ? [3, 5] : [4, p()];
                                            case 3:
                                                return r = a.sent(), [4, _e.showNotificationDialog("", (r("siteMembersTranslations", "SMApply_Success1", "Success! Your member signup request has been sent and is awaiting approval.") + " " + r("siteMembersTranslations", "SMApply_Success2", "The site administrator will notify you via email ({0}) once your request has been approved.")).replace("{0}", i.loginEmail), r("siteMembersTranslations", "SMContainer_OK", "OK"))];
                                            case 5:
                                                return [4, _e.applySessionToken(n, i, t)];
                                            case 6:
                                                return s = a.sent(), [2, (0, o.pi)({
                                                    sessionToken: n,
                                                    member: i
                                                }, t ? {
                                                    pages: s
                                                } : {})]
                                        }
                                    }))
                                }))
                            },
                            promptLogin: function(e, t, n) {
                                void 0 === e && (e = {}), void 0 === t && (t = !0), void 0 === n && (n = !1);
                                var i = e.mode,
                                    o = e.modal ? "popup" : "fullscreen";
                                return "login" === (null != i ? i : ue) ? _e.showLoginDialog(t, o, n) : _e.showSignUpDialog(t, o, n)
                            },
                            promptForgotPassword: function(e) {
                                return void 0 === e && (e = !0), new Promise((function(t, n) {
                                    Re.assignRequestAuthenticationRejection(n);
                                    var i = {
                                            isCloseable: e
                                        },
                                        r = {
                                            onCloseDialogCallback: function() {
                                                ye.closingDialog("RequestResetPassword"), Ie.hideDialog(), Re.rejectAuthenticationRequest()
                                            },
                                            onSubmitCallback: function(e) {
                                                var n = this;
                                                return _e.sendForgotPasswordMail(e).then((function() {
                                                    return (0, o.mG)(n, void 0, void 0, (function() {
                                                        var e;
                                                        return (0, o.Jh)(this, (function(n) {
                                                            switch (n.label) {
                                                                case 0:
                                                                    return [4, p()];
                                                                case 1:
                                                                    return e = n.sent(), _e.showNotificationDialog(e("siteMembersTranslations", "siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE", "Please Check Your Email"), e("siteMembersTranslations", "siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT", "We\u2019ve emailed you a link to reset your password."), e("siteMembersTranslations", "siteMembersTranslations_Reset_Password_OK", "Got It")), t(), [2]
                                                            }
                                                        }))
                                                    }))
                                                }))
                                            }
                                        };
                                    Ie.displayDialog("RequestPasswordResetDialog", i, r)
                                }))
                            },
                            requestAuthentication: function(e) {
                                return void 0 === e && (e = {}), (0, o.mG)(this, void 0, Promise, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                if (Se) return [2, {
                                                    success: !0,
                                                    token: Se,
                                                    reason: C.$9.ALREADY_LOGGED_IN
                                                }];
                                                n.label = 1;
                                            case 1:
                                                return n.trys.push([1, 3, , 4]), t = !U, [4, _e.promptLogin(e, t)];
                                            case 2:
                                                return [2, {
                                                    success: !0,
                                                    token: n.sent().sessionToken,
                                                    reason: C.$9.SUCCESS
                                                }];
                                            case 3:
                                                return [2, {
                                                    success: !1,
                                                    reason: n.sent()
                                                }];
                                            case 4:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            requestAuthorizedPages: function(e) {
                                return void 0 === e && (e = {}), (0, o.mG)(this, void 0, Promise, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                return ve ? [4, _e.authorizeMemberPagesBySignedInstance(ve)] : [3, 2];
                                            case 1:
                                                return [2, {
                                                    success: !0,
                                                    pages: n.sent()
                                                }];
                                            case 2:
                                                return n.trys.push([2, 4, , 5]), t = !U, [4, _e.promptLogin(e, t, !0)];
                                            case 3:
                                                return [2, {
                                                    success: !0,
                                                    pages: n.sent().pages
                                                }];
                                            case 4:
                                                return [2, {
                                                    success: !1,
                                                    reason: n.sent()
                                                }];
                                            case 5:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            applySessionToken: function(e, t, n) {
                                return void 0 === n && (n = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i, s, u, c;
                                    return (0, o.Jh)(this, (function(l) {
                                        switch (l.label) {
                                            case 0:
                                                return r.interactionStarted(C.SE.VERIFY_TOKEN), [4, Te(ie, {
                                                    method: "POST",
                                                    body: "token=" + e
                                                })];
                                            case 1:
                                                if (i = l.sent(), s = i.payload, u = i.errorCode) throw u;
                                                return r.interactionEnded(C.SE.VERIFY_TOKEN), [4, a.loadNewSession({
                                                    reason: "memberLogin"
                                                })];
                                            case 2:
                                                return l.sent(), ve = a.getSmToken(), Se = e, null == t ? [3, 3] : (c = t, [3, 5]);
                                            case 3:
                                                return [4, _e.getMemberDetails()];
                                            case 4:
                                                c = l.sent(), l.label = 5;
                                            case 5:
                                                return be = c, [4, Promise.all(Object.entries(ke).map((function(e) {
                                                    var t = (0, o.CR)(e, 2),
                                                        n = t[0],
                                                        i = t[1];
                                                    return (0, o.mG)(void 0, void 0, void 0, (function() {
                                                        var e;
                                                        return (0, o.Jh)(this, (function(t) {
                                                            switch (t.label) {
                                                                case 0:
                                                                    return t.trys.push([0, 2, , 3]), [4, Promise.race([i(), (0, E._v)(3e3).then((function() {
                                                                        return "$$$timeout$$$"
                                                                    }))])];
                                                                case 1:
                                                                    if ("$$$timeout$$$" === t.sent()) throw new Error("callback " + n + " timed out");
                                                                    return [3, 3];
                                                                case 2:
                                                                    return e = t.sent(), r.captureError(e, {
                                                                        tags: {
                                                                            feature: "site-members"
                                                                        }
                                                                    }), [3, 3];
                                                                case 3:
                                                                    return [2]
                                                            }
                                                        }))
                                                    }))
                                                })))];
                                            case 6:
                                                return l.sent(), n ? [2, s.pages] : [2]
                                        }
                                    }))
                                }))
                            },
                            authorizeMemberPagesByCookie: function() {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var e, t, n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return e = (0, h.yF)(d) ? {
                                                    headers: {
                                                        cookie: "smSession=" + O
                                                    }
                                                } : void 0, [4, Te(oe, e)];
                                            case 1:
                                                if (t = o.sent(), n = t.authorizedPages, i = t.errorCode) throw i;
                                                return [2, n]
                                        }
                                    }))
                                }))
                            },
                            authorizeMemberPagesByToken: function(e) {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var t, n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return e === O ? [2, this.authorizeMemberPagesByCookie()] : [4, Te(ie, {
                                                    method: "POST",
                                                    body: "token=" + e
                                                })];
                                            case 1:
                                                if (t = o.sent(), n = t.payload, i = t.errorCode) throw i;
                                                return [2, n.pages]
                                        }
                                    }))
                                }))
                            },
                            authorizeMemberPagesBySignedInstance: function(e) {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var t, n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return [4, Te(oe, {
                                                    headers: {
                                                        authorization: e
                                                    }
                                                })];
                                            case 1:
                                                if (t = o.sent(), n = t.authorizedPages, i = t.errorCode) throw i;
                                                return [2, n]
                                        }
                                    }))
                                }))
                            },
                            getMemberDetails: function(e) {
                                return void 0 === e && (e = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var t, n, i;
                                    return (0, o.Jh)(this, (function(s) {
                                        switch (s.label) {
                                            case 0:
                                                return !be.id || e ? [3, 1] : [2, be];
                                            case 1:
                                                return ve ? [4, Te("/_api/wix-sm-webapp/member/" + ve + "?collectionId=" + M + "&metaSiteId=" + Y)] : [3, 5];
                                            case 2:
                                                if (t = s.sent(), n = t.payload, i = t.errorCode) throw i;
                                                return be = (0, E.Ky)(n), e ? [4, Promise.all(Object.values(Le).map((function(e) {
                                                    return (0, o.mG)(void 0, void 0, void 0, (function() {
                                                        var t;
                                                        return (0, o.Jh)(this, (function(n) {
                                                            switch (n.label) {
                                                                case 0:
                                                                    return n.trys.push([0, 2, , 3]), [4, e()];
                                                                case 1:
                                                                    return n.sent(), [3, 3];
                                                                case 2:
                                                                    return t = n.sent(), r.captureError(t, {
                                                                        tags: {
                                                                            feature: "site-members"
                                                                        }
                                                                    }), [3, 3];
                                                                case 3:
                                                                    return [2]
                                                            }
                                                        }))
                                                    }))
                                                })))] : [3, 4];
                                            case 3:
                                                s.sent(), s.label = 4;
                                            case 4:
                                                return [2, be];
                                            case 5:
                                                return [2, null]
                                        }
                                    }))
                                }))
                            },
                            register: function(e, t, n, i, s, a, u) {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var c, l, d, m, g, h, f, v, b, S, w;
                                    return (0, o.Jh)(this, (function(D) {
                                        switch (D.label) {
                                            case 0:
                                                a = null != a && a, D.label = 1;
                                            case 1:
                                                return D.trys.push([1, 10, , 11]), r.interactionStarted(C.SE.CODE_SIGNUP), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Sign up Submit",
                                                        eventLabel: "Wix"
                                                    }
                                                }), c = {
                                                    email: e,
                                                    password: t,
                                                    profilePrivacyStatus: i,
                                                    contactInfo: (0, E.t1)(n || {}),
                                                    defaultFlow: s,
                                                    recaptchaToken: u
                                                }, [4, Te("/_api/wix-sm-webapp/v1/auth/signup", {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type": "application/json",
                                                        authorization: B || ""
                                                    },
                                                    body: JSON.stringify(c)
                                                })];
                                            case 2:
                                                return l = D.sent(), d = l.member, m = l.approvalToken, g = l.session, h = d.emailVerified, f = null == g ? void 0 : g.token, v = "ACTIVE" === (null == d ? void 0 : d.status) ? "ACTIVE" : "PENDING", f || h || "ACTIVE" !== d.status ? [3, 4] : [4, _e.showConfirmationEmailDialog(d.id)];
                                            case 3:
                                                return D.sent(), r.interactionEnded(C.SE.CODE_SIGNUP), [2, {
                                                    member: d,
                                                    status: v
                                                }];
                                            case 4:
                                                return s && "APPLICANT" === (null == d ? void 0 : d.status) || !f ? [4, p()] : [3, 7];
                                            case 5:
                                                return b = D.sent(), [4, _e.showNotificationDialog("", (b("siteMembersTranslations", "SMApply_Success1", "Success! Your member login request has been sent and is awaiting approval.") + " " + b("siteMembersTranslations", "SMApply_Success2", "The site administrator will notify you via email ({0}) once your request has been approved.")).replace("{0}", e), b("siteMembersTranslations", "SMContainer_OK", "OK"))];
                                            case 6:
                                                return D.sent(), r.interactionEnded(C.SE.CODE_SIGNUP), [2, {
                                                    member: d,
                                                    status: v,
                                                    approvalToken: m
                                                }];
                                            case 7:
                                                return [4, _e.applySessionToken(f, d, a)];
                                            case 8:
                                                return S = D.sent(), r.interactionEnded(C.SE.CODE_SIGNUP), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Sign up Success",
                                                        eventLabel: "Wix"
                                                    }
                                                }), P.trackEvent({
                                                    eventName: "CompleteRegistration",
                                                    params: {
                                                        origin: "Site members",
                                                        method: "Wix"
                                                    }
                                                }), [2, (0, o.pi)({
                                                    member: d,
                                                    status: v,
                                                    sessionToken: f
                                                }, a && S ? {
                                                    pages: S
                                                } : {})];
                                            case 9:
                                                return [3, 11];
                                            case 10:
                                                throw w = D.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Sign up Failure",
                                                        eventLabel: "Wix"
                                                    }
                                                }), (0, E.fJ)(w) && r.interactionEnded(C.SE.CODE_SIGNUP), w;
                                            case 11:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            sendForgotPasswordMail: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t, n, i, s;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return r.interactionStarted(C.SE.RESET_PASSWORD), t = l.userLanguage, n = encodeURIComponent(Q), i = encodeURIComponent(e), [4, Te("/_api/wix-sm-webapp/member/sendForgotPasswordMail", {
                                                    method: "POST",
                                                    body: "returnUrl=" + n + "&collectionId=" + M + "&metaSiteId=" + Y + "&lang=" + t + "&email=" + i
                                                })];
                                            case 1:
                                                if (s = o.sent().errorCode) throw s;
                                                return r.interactionEnded(C.SE.RESET_PASSWORD), [2]
                                        }
                                    }))
                                }))
                            },
                            sendSetPasswordEmail: function(e, t) {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var n;
                                    return (0, o.Jh)(this, (function(i) {
                                        switch (i.label) {
                                            case 0:
                                                return [4, Te("/_api/wix-sm-webapp/members/v1/auth/members/send-set-password-email", {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type": "application/json",
                                                        authorization: B || ""
                                                    },
                                                    body: JSON.stringify((0, o.pi)({
                                                        email: e
                                                    }, (null == t ? void 0 : t.hideIgnoreMessage) ? {
                                                        hideIgnoreMessage: t.hideIgnoreMessage
                                                    } : {}))
                                                })];
                                            case 1:
                                                return [2, !!(null == (n = i.sent()) ? void 0 : n.accepted)]
                                        }
                                    }))
                                }))
                            },
                            changePassword: function(e, t) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return n = encodeURIComponent(e), [4, Te(se, {
                                                    method: "POST",
                                                    body: "newPassword=" + n + "&forgotPasswordToken=" + t
                                                })];
                                            case 1:
                                                if (i = o.sent().errorCode) throw i;
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            resendEmailVerification: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                return [4, Te("/_api/wix-sm-webapp/tokens/email/resend/" + e)];
                                            case 1:
                                                if (t = n.sent().errorCode) throw t;
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            logout: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                return ve ? [4, Te(re, {
                                                    method: "POST"
                                                })] : [2];
                                            case 1:
                                                return n.sent(), [4, Promise.all(Object.values(Ee).map((function(e) {
                                                    return (0, o.mG)(void 0, void 0, void 0, (function() {
                                                        var t;
                                                        return (0, o.Jh)(this, (function(n) {
                                                            switch (n.label) {
                                                                case 0:
                                                                    return n.trys.push([0, 2, , 3]), [4, e()];
                                                                case 1:
                                                                    return n.sent(), [3, 3];
                                                                case 2:
                                                                    return t = n.sent(), r.captureError(t, {
                                                                        tags: {
                                                                            feature: "site-members"
                                                                        }
                                                                    }), [3, 3];
                                                                case 3:
                                                                    return [2]
                                                            }
                                                        }))
                                                    }))
                                                })))];
                                            case 2:
                                                return n.sent(), e ? (t = "./" + e.replace(/^\//, ""), [4, m.navigate(t)]) : [3, 4];
                                            case 3:
                                                n.sent(), n.label = 4;
                                            case 4:
                                                return (0, h.yF)(d) || d.document.location.reload(), [2]
                                        }
                                    }))
                                }))
                            },
                            registerToUserLogin: function(e, t) {
                                return void 0 === t && (t = (0, w.uniqueId)("callback")), ke[t] = e, t
                            },
                            unRegisterToUserLogin: function(e) {
                                delete ke[e]
                            },
                            registerToMemberLogout: function(e) {
                                var t = (0, w.uniqueId)("logout_callback");
                                return Ee[t] = e, t
                            },
                            unRegisterToMemberLogout: function(e) {
                                delete Ee[e]
                            },
                            registerToMemberDetailsRefresh: function(e) {
                                var t = (0, w.uniqueId)("mdrcb");
                                return Le[t] = e, t
                            },
                            unRegisterToMemberDetailsRefresh: function(e) {
                                delete Le[e]
                            },
                            showWelcomeDialog: function(e) {
                                return void 0 === e && (e = !0), (0, o.mG)(this, void 0, void 0, (function() {
                                    var t, n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        return t = {
                                            isCloseable: e
                                        }, n = f.getParsedUrl(), i = {
                                            onCloseDialogCallback: function() {
                                                ye.closingDialog("WelcomeDialog");
                                                var e = new URL(s.requestUrl).hostname,
                                                    t = 0 === e.indexOf("www") ? e.substr(3) : e;
                                                I("sm_ef", "/", t), J = "", Ie.hideDialog(), m.navigate(n.href)
                                            },
                                            onSubmitCallback: function() {
                                                var e = new URL(s.requestUrl).hostname,
                                                    t = 0 === e.indexOf("www") ? e.substr(3) : e;
                                                I("sm_ef", "/", t), J = "", Ie.hideDialog(), $ && m.navigate("./account/my-account"), m.navigate(n.href)
                                            }
                                        }, Ie.displayDialog("WelcomeDialog", t, i), [2]
                                    }))
                                }))
                            },
                            showNoPermissionsToPageDialog: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        return t = {
                                            onCloseDialogCallback: function() {
                                                Ie.hideDialog(), e && e()
                                            },
                                            onSwitchAccountLinkClick: function() {
                                                _e.logout()
                                            }
                                        }, Ie.displayDialog("NoPermissionsToPageDialog", {}, t), [2]
                                    }))
                                }))
                            },
                            showResetPasswordDialog: function(e, t) {
                                return void 0 === t && (t = !1), (0, o.mG)(this, void 0, void 0, (function() {
                                    var n, i;
                                    return (0, o.Jh)(this, (function(r) {
                                        return n = {
                                            isCloseable: !0,
                                            isPolicyLinksSectionVisible: L["specs.thunderbolt.sm_showPolicyLinksResetPasswordDialog"],
                                            isTermsOfUseNeeded: !(!(null == de ? void 0 : de.enabled) || !V.termsOfUse),
                                            isPrivacyPolicyNeeded: !(!(null == me ? void 0 : me.enabled) || !V.privacyPolicy),
                                            termsOfUseLink: V.termsOfUse,
                                            privacyPolicyLink: V.privacyPolicy
                                        }, i = {
                                            onCloseDialogCallback: function() {
                                                ye.closingDialog("ResetPasswordDialog");
                                                var e = f.getParsedUrl();
                                                e.searchParams.delete("forgotPasswordToken"), e.searchParams.delete("forgotPasswordLang"), f.pushUrlState(e), Ie.hideDialog(), m.navigate(e.href)
                                            },
                                            onSubmitCallback: function(t) {
                                                return (0, o.mG)(this, void 0, void 0, (function() {
                                                    var i, r, s = this;
                                                    return (0, o.Jh)(this, (function(a) {
                                                        switch (a.label) {
                                                            case 0:
                                                                return [4, p()];
                                                            case 1:
                                                                i = a.sent(), a.label = 2;
                                                            case 2:
                                                                return a.trys.push([2, 4, , 5]), [4, _e.changePassword(t, e)];
                                                            case 3:
                                                                return a.sent(), _e.showNotificationDialog(i("siteMembersTranslations", "siteMembersTranslations_Reset_Password_Sucess_Title", "Your password has been changed."), "", i("siteMembersTranslations", "SMContainer_OK", "OK"), (function() {
                                                                    return (0, o.mG)(s, void 0, void 0, (function() {
                                                                        var e;
                                                                        return (0, o.Jh)(this, (function(t) {
                                                                            switch (t.label) {
                                                                                case 0:
                                                                                    return (e = f.getParsedUrl()).searchParams.delete("forgotPasswordToken"), e.searchParams.delete("forgotPasswordLang"), f.pushUrlState(e), [4, _e.showLoginDialog()];
                                                                                case 1:
                                                                                    return t.sent(), m.navigate(e.href), [2]
                                                                            }
                                                                        }))
                                                                    }))
                                                                })), [3, 5];
                                                            case 4:
                                                                if (-19972 !== (r = a.sent())) throw r;
                                                                return _e.showNotificationDialog(i("siteMembersTranslations", "siteMembersTranslations_PASSWORD_HAS_EXPIRED_TITLE", "Your link to create a new password has expired"), i("siteMembersTranslations", "siteMembersTranslations_PASSWORD_HAS_EXPIRED_TEXT", "To continue, resend a new link to your email."), i("siteMembersTranslations", "siteMembersTranslations_PASSWORD_HAS_EXPIRED_OK", "Resend Link"), (function() {
                                                                    return _e.promptForgotPassword(n.isCloseable).then((function() {
                                                                        var e = f.getParsedUrl();
                                                                        m.navigate(e.href)
                                                                    }))
                                                                })), [3, 5];
                                                            case 5:
                                                                return [2]
                                                        }
                                                    }))
                                                }))
                                            }
                                        }, Ie.displayDialog("ResetPasswordDialog", n, i, t ? {} : De()), [2]
                                    }))
                                }))
                            },
                            showLoginDialog: function(e, t, n) {
                                return void 0 === e && (e = !0), void 0 === t && (t = "fullscreen"), void 0 === n && (n = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i = this;
                                    return (0, o.Jh)(this, (function(s) {
                                        return pe && (null == S ? void 0 : S.isPopupPage(pe)) ? [2, _e.showCustomAuthenticationDialog(pe, n)] : [2, new Promise((function(s, a) {
                                            return (0, o.mG)(i, void 0, void 0, (function() {
                                                var i, u;
                                                return (0, o.Jh)(this, (function(o) {
                                                    switch (o.label) {
                                                        case 0:
                                                            return Re.assignRequestAuthenticationRejection(a), i = {
                                                                displayMode: t,
                                                                language: l.userLanguage,
                                                                directionByLanguage: l.directionByLanguage,
                                                                isCloseable: e,
                                                                smCollectionId: M,
                                                                svSession: W,
                                                                biVisitorId: F,
                                                                metaSiteId: Y,
                                                                isSocialLoginGoogleEnabled: le,
                                                                isSocialLoginFacebookEnabled: !x && ce,
                                                                isEmailLoginEnabled: !x,
                                                                isSocialAuthSupported: te,
                                                                useGoogleSdk: Ae
                                                            }, u = {
                                                                onCloseDialogCallback: function() {
                                                                    Ie.hideDialog(), ye.closingDialog("MemberLoginDialog", t), Re.rejectAuthenticationRequest()
                                                                },
                                                                submit: function(e, i, o) {
                                                                    return r.interactionStarted(C.SE.DEFAULT_LOGIN), ye.emailAuthSubmitClicked("MemberLoginDialog", t), _e.login(e, i, o, n).then((function(e) {
                                                                        r.interactionEnded(C.SE.DEFAULT_LOGIN), Ie.hideDialog(), s(e)
                                                                    })).catch((function(e) {
                                                                        throw (0, E.Y2)(e) && r.interactionEnded(C.SE.DEFAULT_LOGIN), e
                                                                    }))
                                                                },
                                                                onForgetYourPasswordClick: function() {
                                                                    _e.promptForgotPassword(e)
                                                                },
                                                                onSwitchDialogLinkClick: function() {
                                                                    _e.showSignUpDialog(e, t, n).then(s, (function() {
                                                                        Re.rejectAuthenticationRequest()
                                                                    }))
                                                                },
                                                                onTokenMessage: function(e, t, i) {
                                                                    var o;
                                                                    return void 0 === i && (i = !1), N && (o = i ? "PUBLIC" : "PRIVATE"), _e.handleOauthToken(e, t, "memberLoginDialog", o, n).then((function(e) {
                                                                        Ie.hideDialog(), s(e)
                                                                    }))
                                                                },
                                                                onBackendSocialLogin: function(e, t) {
                                                                    return _e.handleSocialLoginResponse(e, t, n).then((function(e) {
                                                                        Ie.hideDialog(), s(e)
                                                                    }))
                                                                },
                                                                getHostReadyPayload: function() {
                                                                    return {
                                                                        visitorId: F,
                                                                        svSession: W
                                                                    }
                                                                }
                                                            }, ye.loginOrSignUpDialogLoaded("MemberLoginDialog", t), [4, Ie.displayDialog("MemberLoginDialog", i, u, De())];
                                                        case 1:
                                                            return o.sent(), _e.closeCustomAuthenticationDialogs(!0), [2]
                                                    }
                                                }))
                                            }))
                                        }))]
                                    }))
                                }))
                            },
                            showSignUpDialog: function(e, t, n) {
                                return void 0 === e && (e = !0), void 0 === t && (t = "fullscreen"), void 0 === n && (n = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i = this;
                                    return (0, o.Jh)(this, (function(s) {
                                        return he && (null == S ? void 0 : S.isPopupPage(he)) ? [2, _e.showCustomAuthenticationDialog(he, n)] : [2, new Promise((function(s, a) {
                                            return (0, o.mG)(i, void 0, void 0, (function() {
                                                var i, u;
                                                return (0, o.Jh)(this, (function(c) {
                                                    switch (c.label) {
                                                        case 0:
                                                            return Re.assignRequestAuthenticationRejection(a), i = {
                                                                displayMode: t,
                                                                language: l.userLanguage,
                                                                directionByLanguage: l.directionByLanguage,
                                                                isCloseable: e,
                                                                smCollectionId: M,
                                                                biVisitorId: F,
                                                                svSession: W,
                                                                metaSiteId: Y,
                                                                isSocialLoginGoogleEnabled: le,
                                                                isSocialLoginFacebookEnabled: !x && ce,
                                                                isSocialAuthSupported: te,
                                                                isEmailLoginEnabled: !x,
                                                                isCommunityInstalled: N,
                                                                joinCommunityCheckedByDefault: fe,
                                                                isTermsOfUseNeeded: !(!(null == de ? void 0 : de.enabled) || !V.termsOfUse),
                                                                isPrivacyPolicyNeeded: !(!(null == me ? void 0 : me.enabled) || !V.privacyPolicy),
                                                                isCodeOfConductNeeded: !(!(null == ge ? void 0 : ge.enabled) || !V.codeOfConduct),
                                                                termsOfUseLink: V.termsOfUse,
                                                                privacyPolicyLink: V.privacyPolicy,
                                                                codeOfConductLink: V.codeOfConduct,
                                                                useGoogleSdk: Ae
                                                            }, u = {
                                                                onCloseDialogCallback: function() {
                                                                    Ie.hideDialog(), ye.closingDialog("SignUpDialog", t), Re.rejectAuthenticationRequest()
                                                                },
                                                                submit: function(e, i, a) {
                                                                    var u;
                                                                    N && (u = ("boolean" == typeof a ? a : a.isCommunityChecked) ? C.iY.PUBLIC : C.iY.PRIVATE);
                                                                    var c = "boolean" == typeof a || null == a ? void 0 : a.recaptchaToken;
                                                                    return r.interactionStarted(C.SE.DEFAULT_SIGNUP), ye.emailAuthSubmitClicked("SignUpDialog", t), _e.register(e, i, void 0, u, void 0, n, c).then((function(e) {
                                                                        r.interactionEnded(C.SE.DEFAULT_SIGNUP);
                                                                        var t = e.member,
                                                                            i = e.sessionToken,
                                                                            a = e.pages;
                                                                        i && (Ie.hideDialog(), s((0, o.pi)({
                                                                            member: t,
                                                                            sessionToken: i
                                                                        }, n ? {
                                                                            pages: a
                                                                        } : {})))
                                                                    })).catch((function(e) {
                                                                        throw (0, E.fJ)(e) && r.interactionEnded(C.SE.DEFAULT_SIGNUP), e
                                                                    }))
                                                                },
                                                                onSwitchDialogLinkClick: function() {
                                                                    _e.showLoginDialog(e, t, n).then(s, (function() {
                                                                        Re.rejectAuthenticationRequest()
                                                                    }))
                                                                },
                                                                onTokenMessage: function(e, t, i) {
                                                                    var o;
                                                                    return void 0 === i && (i = !1), N && (o = i ? "PUBLIC" : "PRIVATE"), _e.handleOauthToken(e, t, "memberLoginDialog", o, n).then((function(e) {
                                                                        Ie.hideDialog(), s(e)
                                                                    }))
                                                                },
                                                                onBackendSocialLogin: function(e, t) {
                                                                    return _e.handleSocialLoginResponse(e, t, n).then((function(e) {
                                                                        Ie.hideDialog(), s(e)
                                                                    }))
                                                                },
                                                                getHostReadyPayload: function() {
                                                                    return {
                                                                        visitorId: F,
                                                                        svSession: W
                                                                    }
                                                                }
                                                            }, ye.loginOrSignUpDialogLoaded("SignUpDialog", t), [4, Ie.displayDialog("SignUpDialog", i, u, De())];
                                                        case 1:
                                                            return c.sent(), _e.closeCustomAuthenticationDialogs(!0), [2]
                                                    }
                                                }))
                                            }))
                                        }))]
                                    }))
                                }))
                            },
                            showNotificationDialog: function(e, t, n, i, r) {
                                return void 0 === i && (i = function() {
                                    return 0
                                }), void 0 === r && (r = function() {
                                    return 0
                                }), (0, o.mG)(this, void 0, void 0, (function() {
                                    var s, a;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return s = {
                                                    isCloseable: !0,
                                                    title: e,
                                                    description: t,
                                                    okButtonText: n
                                                }, a = {
                                                    onCloseDialogCallback: function() {
                                                        ye.closingDialog("NotificationDialog"), Ie.hideDialog(), r()
                                                    },
                                                    onOkButtonClick: function() {
                                                        Ie.hideDialog(), i()
                                                    }
                                                }, [4, Ie.displayDialog("NotificationDialog", s, a)];
                                            case 1:
                                                return o.sent(), [2]
                                        }
                                    }))
                                }))
                            },
                            showConfirmationEmailDialog: function(e, t) {
                                return void 0 === t && (t = !0), (0, o.mG)(this, void 0, void 0, (function() {
                                    var n, i;
                                    return (0, o.Jh)(this, (function(r) {
                                        switch (r.label) {
                                            case 0:
                                                return n = {
                                                    isCloseable: !0,
                                                    isSignUp: t
                                                }, i = {
                                                    onCloseDialogCallback: function() {
                                                        ye.closingDialog("ConfirmationEmailDialog"), Ie.hideDialog()
                                                    },
                                                    onResendConfirmationEmail: function() {
                                                        return (0, o.mG)(this, void 0, void 0, (function() {
                                                            return (0, o.Jh)(this, (function(t) {
                                                                switch (t.label) {
                                                                    case 0:
                                                                        return [4, _e.resendEmailVerification(e)];
                                                                    case 1:
                                                                        return t.sent(), [4, _e.showConfirmationEmailDialog(e, !1)];
                                                                    case 2:
                                                                        return t.sent(), [2]
                                                                }
                                                            }))
                                                        }))
                                                    }
                                                }, [4, Ie.displayDialog("ConfirmationEmailDialog", n, i)];
                                            case 1:
                                                return r.sent(), [2]
                                        }
                                    }))
                                }))
                            },
                            showCustomAuthenticationDialog: function(e, t) {
                                return void 0 === t && (t = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var n = this;
                                    return (0, o.Jh)(this, (function(i) {
                                        if (!S) throw new Error("popup unavailable");
                                        return [2, new Promise((function(i, r) {
                                            return (0, o.mG)(n, void 0, void 0, (function() {
                                                var n, s = this;
                                                return (0, o.Jh)(this, (function(a) {
                                                    switch (a.label) {
                                                        case 0:
                                                            return n = _e.registerToUserLogin((function() {
                                                                return (0, o.mG)(s, void 0, void 0, (function() {
                                                                    var r, s, a, u;
                                                                    return (0, o.Jh)(this, (function(c) {
                                                                        switch (c.label) {
                                                                            case 0:
                                                                                return r = i, s = [{
                                                                                    member: be,
                                                                                    sessionToken: Se
                                                                                }], t ? (u = {}, [4, _e.authorizeMemberPagesBySignedInstance(ve)]) : [3, 2];
                                                                            case 1:
                                                                                return u.pages = c.sent(), a = u, [3, 3];
                                                                            case 2:
                                                                                a = {}, c.label = 3;
                                                                            case 3:
                                                                                return r.apply(void 0, [o.pi.apply(void 0, s.concat([a]))]), _e.unRegisterToUserLogin(n), S.getCurrentPopupId() === e && S.closePopupPage(), [2]
                                                                        }
                                                                    }))
                                                                }))
                                                            }), "customAuthCbId"), [4, Re.openPopupPage(e, r, (function() {
                                                                _e.unRegisterToUserLogin(n)
                                                            }))];
                                                        case 1:
                                                            return a.sent(), Ie.hideDialog(), [2]
                                                    }
                                                }))
                                            }))
                                        }))]
                                    }))
                                }))
                            },
                            closeCustomAuthenticationDialogs: function(e) {
                                return void 0 === e && (e = !1), (0, o.mG)(this, void 0, void 0, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                return (t = null == S ? void 0 : S.getCurrentPopupId()) && [he, pe].includes(t) ? (e && Re.preventCustomPopupCloseCallback(), [4, S.closePopupPage()]) : [3, 2];
                                            case 1:
                                                n.sent(), Re.allowCustomPopupCloseCallback(), n.label = 2;
                                            case 2:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            getForgotPasswordToken: function() {
                                return new URL((0, h.yF)(d) ? s.requestUrl : location.href).searchParams.get("forgotPasswordToken")
                            },
                            shouldDisplayWelcomeDialog: function() {
                                return J && $
                            },
                            appWillMount: function() {
                                switch (new URL(s.requestUrl).searchParams.get("showDialog")) {
                                    case "MemberLoginDialog":
                                        _e.showLoginDialog();
                                        break;
                                    case "SignUpDialog":
                                        _e.showSignUpDialog();
                                        break;
                                    case "RequestPasswordResetDialog":
                                        _e.promptForgotPassword();
                                        break;
                                    case "ResetPasswordDialog":
                                        _e.showResetPasswordDialog("faketoken", !0);
                                        break;
                                    case "WelcomeDialog":
                                        _e.showWelcomeDialog();
                                        break;
                                    case "NoPermissionsToPageDialog":
                                        _e.showNoPermissionsToPageDialog();
                                        break;
                                    case "NotificationDialog":
                                        _e.showNotificationDialog("title", "description", "ok");
                                        break;
                                    case "ConfirmationEmailDialog":
                                        _e.showConfirmationEmailDialog("fakemember")
                                }
                            },
                            pageWillUnmount: function(e) {
                                var t = e.pageId;
                                [he, pe].includes(t) || Ie.hideDialog()
                            },
                            getSocialAuthComponentProps: function() {
                                return (0, E.IO)({
                                    config: e,
                                    viewerModel: s,
                                    sessionManager: a,
                                    handleOauthToken: _e.handleOauthToken,
                                    handleSocialLoginResponse: _e.handleSocialLoginResponse,
                                    isSocialAuthSupported: ne
                                })
                            }
                        };
                    return n.update((function() {
                        return {
                            shouldShowRenderingBlockingDialogs: function() {
                                return !(!_e.getForgotPasswordToken() && !_e.shouldDisplayWelcomeDialog())
                            },
                            showRenderingBlockingDialogs: function() {
                                var e = _e.getForgotPasswordToken();
                                return e ? _e.showResetPasswordDialog(e) : _e.shouldDisplayWelcomeDialog() ? _e.showWelcomeDialog() : void 0
                            }
                        }
                    })), _e
                })),
                R = n(59032),
                _ = n(95793),
                M = n(81600),
                O = (0, i.ff)([D.n9], (function(e) {
                    return {
                        getTpaHandlers: function() {
                            var t = this,
                                n = function(n, i, r) {
                                    return (0, o.mG)(t, void 0, Promise, (function() {
                                        var t, n, i, s;
                                        return (0, o.Jh)(this, (function(o) {
                                            switch (o.label) {
                                                case 0:
                                                    return [4, e.getMemberDetails()];
                                                case 1:
                                                    return (t = o.sent()) ? (null === (n = r.appClientSpecMapData) || void 0 === n ? void 0 : n.isWixTPA) ? [2, {
                                                        attributes: {
                                                            firstName: null !== (i = t.firstName) && void 0 !== i ? i : "",
                                                            lastName: null !== (s = t.lastName) && void 0 !== s ? s : "",
                                                            privacyStatus: t.profilePrivacyStatus
                                                        },
                                                        name: t.memberName,
                                                        email: t.loginEmail,
                                                        id: t.id,
                                                        owner: t.owner,
                                                        status: t.status
                                                    }] : [2, {
                                                        id: t.id,
                                                        owner: t.owner,
                                                        status: t.status
                                                    }] : [2, null]
                                            }
                                        }))
                                    }))
                                },
                                i = function(n, i) {
                                    return void 0 === i && (i = {}), (0, o.mG)(t, void 0, Promise, (function() {
                                        var t, n, r;
                                        return (0, o.Jh)(this, (function(o) {
                                            switch (o.label) {
                                                case 0:
                                                    return [4, e.promptLogin({
                                                        mode: i.mode,
                                                        modal: i.modal
                                                    })];
                                                case 1:
                                                    return t = o.sent().member, [2, {
                                                        attributes: {
                                                            firstName: null !== (n = t.firstName) && void 0 !== n ? n : "",
                                                            lastName: null !== (r = t.lastName) && void 0 !== r ? r : "",
                                                            privacyStatus: t.profilePrivacyStatus
                                                        },
                                                        name: t.memberName,
                                                        email: t.loginEmail,
                                                        id: t.id,
                                                        owner: t.owner,
                                                        status: t.status
                                                    }]
                                            }
                                        }))
                                    }))
                                };
                            return {
                                currentMember: n,
                                smCurrentMember: n,
                                logOutCurrentMember: (0, M.u)(["site"], (function(t, n) {
                                    e.logout(null == n ? void 0 : n.url)
                                })),
                                requestLogin: (0, M.u)(["site"], i),
                                smRequestLogin: (0, M.u)(["site"], i)
                            }
                        }
                    }
                })),
                U = (0, i.ff)([D.n9, (0, i.t6)(r.$e, D.u2), u.xP], (function(e, t, n) {
                    var i = t.componentIds;
                    return {
                        pageWillMount: function() {
                            return (0, o.mG)(this, void 0, void 0, (function() {
                                var t;
                                return (0, o.Jh)(this, (function(r) {
                                    return t = i.reduce((function(t, n) {
                                        var i, r = e.getSocialAuthComponentProps();
                                        return (0, o.pi)((0, o.pi)({}, t), ((i = {})[n] = r, i))
                                    }), {}), n.update(t), [2]
                                }))
                            }))
                        }
                    }
                })),
                N = (0, i.ff)([(0, i.t6)(r.Wf, D.u2)], (function(e) {
                    return {
                        handle: function(t) {
                            return (0, o.mG)(void 0, void 0, void 0, (function() {
                                var n, i, r;
                                return (0, o.Jh)(this, (function(o) {
                                    return n = e.get(), i = n.shouldShowRenderingBlockingDialogs, r = n.showRenderingBlockingDialogs, i() ? (r(), [2, null]) : [2, t]
                                }))
                            }))
                        }
                    }
                })),
                G = function(e) {
                    e(D.n9, R.j.AppWillMountHandler, R.j.AppDidMountHandler).to(A), e(f.BD.BlockingDialogs).to(N)
                },
                J = function(e) {
                    e(_.g).to(O), e(R.j.PageWillMountHandler).to(U), e(R.j.PageWillUnmountHandler).to((0, i.ff)([D.n9], (function(e) {
                        return {
                            pageWillUnmount: function(t) {
                                return e.pageWillUnmount(t)
                            }
                        }
                    })))
                }
        }
    }
]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/siteMembers.07b35ae2.chunk.min.js.map